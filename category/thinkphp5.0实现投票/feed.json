{
    "version": "https://jsonfeed.org/version/1",
    "title": "ç å‘çš„åšå®¢ â€¢ All posts by \"thinkphp5.0å®ç°æŠ•ç¥¨\" category",
    "description": "æœ¬äººæ˜¯å°ç™½,åˆæ¬¡ä¸å„ä½ç›¸é‡,è¯·å¤šå¤šæŒ‡æ•™,è°¢è°¢ ã˜èŒå–µå–µãƒ«ã‚ Ğ®â†˜ ç‚ãƒ«Â°",
    "home_page_url": "https://ahjie.top",
    "items": [
        {
            "id": "https://ahjie.top/php/PHP_vote/",
            "url": "https://ahjie.top/php/PHP_vote/",
            "title": "thinkphp5.0å®ç°æŠ•ç¥¨",
            "date_published": "2021-03-10T02:11:31.093Z",
            "content_html": "<h2 id=\"ç®€ä»‹\"><a class=\"markdownIt-Anchor\" href=\"#ç®€ä»‹\">#</a> ğŸ’ <span class=\"rainbow\">ç®€ä»‹</span></h2>\n<p>ç°åœ¨æŠ•ç¥¨çš„åŠŸèƒ½ï¼Œä¸ç®¡æ˜¯ Web ç«¯ï¼Œå°ç¨‹åºç«¯ï¼ŒAPP ç«¯ï¼Œç°åœ¨æŠ•ç¥¨è¿™ä¸ªåŠŸèƒ½å¯ä»¥è¯´è¿˜æ˜¯æŒºç«çš„<br>\nä»Šå¤©å‘¢ï¼Œé˜¿æ°å°±ç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªåˆ©ç”¨ php ä¸­ thinkphp5.0 æ¡†æ¶é›†åˆå®ç°ä¸€ä¸ªæŠ•ç¥¨çš„åŠŸèƒ½ï¼Œ<br>\n æˆ‘è¿™è¾¹æŠ•ç¥¨æ˜¯ç”¨åœ¨äº†å¾®ä¿¡å°ç¨‹åºç«¯ä¸Šï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢å°±ç»™å¤§å®¶æ¼”ç¤ºä»£ç .</p>\n<p>ğŸ’ <span class=\"rainbow\">åœ¨æ–‡ç« åº•éƒ¨ç‚¹å‡»èµèµï¼Œè¯·æˆ‘å–æ¯å¥¶èŒ¶å“¦ï¼</span></p>\n<p>ğŸ’ <span class=\"rainbow\">æ­£åœ¨åŠªåŠ›å­¦ä¹ ï½~ ~ ~ ~ ~ ~ ~</span></p>\n<h2 id=\"æ¥å§-~-å±•ç¤º\"><a class=\"markdownIt-Anchor\" href=\"#æ¥å§-~-å±•ç¤º\">#</a> ğŸ’ <span class=\"rainbow\">æ¥å§ï½å±•ç¤º</span></h2>\n<p><span class=\"rainbow\">PHP ä»£ç éƒ¨åˆ†:</span></p>\n<figure class=\"highlight php\"><figcaption><span>PHP</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * åˆ¤æ–­æŠ•ç¥¨</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> VoteModel æŠ•ç¥¨è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> $uid ç”¨æˆ·id</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> $vid æŠ•ç¥¨ä½œå“id</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">vote_up</span>(<span class=\"params\">$uid, $vid</span>)</span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (Votes::get([<span class=\"string\">&#x27;uid&#x27;</span> =&gt; $uid])) &#123;</span><br><span class=\"line\">           $msg = [</span><br><span class=\"line\">               <span class=\"string\">&#x27;code&#x27;</span> =&gt; <span class=\"number\">1002</span>,</span><br><span class=\"line\">               <span class=\"string\">&#x27;msg&#x27;</span> =&gt; <span class=\"string\">&#x27;æ‚¨å·²ç»æŠ•è¿‡ç¥¨äº†&#x27;</span></span><br><span class=\"line\">           ];</span><br><span class=\"line\">           <span class=\"keyword\">return</span> json($msg);</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           <span class=\"comment\">//æ²¡æœ‰è¯¥æŠ•ç¥¨,æ·»åŠ æŠ•ç¥¨è®°å½•</span></span><br><span class=\"line\">           $data = [</span><br><span class=\"line\">               <span class=\"string\">&#x27;uid&#x27;</span> =&gt; $uid,</span><br><span class=\"line\">               <span class=\"string\">&#x27;vid&#x27;</span> =&gt; $vid,</span><br><span class=\"line\">           ];</span><br><span class=\"line\">           (<span class=\"keyword\">new</span> Votes())-&gt;save($data);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"comment\">//è·å–å½“å‰idå¯¹åº”çš„æŠ•ç¥¨å…¬å¸</span></span><br><span class=\"line\">       $res = Db::table(<span class=\"string\">&#x27;vote&#x27;</span>)-&gt;where(<span class=\"string\">&#x27;id&#x27;</span>,$vid)-&gt;find();</span><br><span class=\"line\">       <span class=\"comment\">//è·å–å½“å‰æŠ•ç¥¨ä¸­çš„æŠ•ç¥¨æ•°</span></span><br><span class=\"line\">       $total = intval($res[<span class=\"string\">&#x27;total_votes&#x27;</span>]) + <span class=\"number\">1</span>;</span><br><span class=\"line\">       <span class=\"comment\">//æ›´æ–°æ•°æ®</span></span><br><span class=\"line\">       $result = Db::table(<span class=\"string\">&#x27;vote&#x27;</span>)-&gt;where(<span class=\"string\">&#x27;id&#x27;</span>, $vid)-&gt;update([<span class=\"string\">&#x27;total_votes&#x27;</span> =&gt; $total]);</span><br><span class=\"line\">       <span class=\"comment\">//åˆ¤æ–­æŠ•ç¥¨æ•°æ®æ˜¯å¦æˆåŠŸ</span></span><br><span class=\"line\">       <span class=\"keyword\">if</span> ($result == $result) &#123;</span><br><span class=\"line\">           $msg = [</span><br><span class=\"line\">               <span class=\"string\">&#x27;code&#x27;</span> =&gt; <span class=\"string\">&#x27;1000&#x27;</span>,</span><br><span class=\"line\">               <span class=\"string\">&#x27;msg&#x27;</span> =&gt; <span class=\"string\">&#x27;æŠ•ç¥¨æˆåŠŸ&#x27;</span></span><br><span class=\"line\">           ];</span><br><span class=\"line\">           <span class=\"keyword\">return</span> json($msg);</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           $msg = [</span><br><span class=\"line\">               <span class=\"string\">&#x27;code&#x27;</span> =&gt; <span class=\"string\">&#x27;1001&#x27;</span>,</span><br><span class=\"line\">               <span class=\"string\">&#x27;msg&#x27;</span> =&gt; <span class=\"string\">&#x27;ç³»ç»ŸæœåŠ¡å™¨ç¹å¿™&#x27;</span></span><br><span class=\"line\">           ];</span><br><span class=\"line\">           <span class=\"keyword\">return</span> json($msg);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"æ’è¡Œæ¦œä»¥åŠæŠ•ç¥¨æ•°éƒ½æ˜¯ç®€å•æ“ä½œè¿™é‡Œè¯å°±ä¸ç»™å¤§å®¶æ¼”ç¤ºæç¤ºæ’è¡Œæ¦œç›´æ¥ä»æ•°æ®åº“æŸ¥è¯¢è®°å½•ç¥¨æ•°çš„å­—æ®µè¿›è¡Œæ’åºå°±å¯ä»¥äº†ç¥¨æ•°çš„è¯ç›´æ¥æŸ¥è¯¢ç¥¨æ•°å­—æ®µå³å¯\"><a class=\"markdownIt-Anchor\" href=\"#æ’è¡Œæ¦œä»¥åŠæŠ•ç¥¨æ•°éƒ½æ˜¯ç®€å•æ“ä½œè¿™é‡Œè¯å°±ä¸ç»™å¤§å®¶æ¼”ç¤ºæç¤ºæ’è¡Œæ¦œç›´æ¥ä»æ•°æ®åº“æŸ¥è¯¢è®°å½•ç¥¨æ•°çš„å­—æ®µè¿›è¡Œæ’åºå°±å¯ä»¥äº†ç¥¨æ•°çš„è¯ç›´æ¥æŸ¥è¯¢ç¥¨æ•°å­—æ®µå³å¯\">#</a> ğŸ’ æ’è¡Œæ¦œï¼Œä»¥åŠæŠ•ç¥¨æ•°ï¼Œéƒ½æ˜¯ç®€å•æ“ä½œï¼Œè¿™é‡Œè¯å°±ä¸ç»™å¤§å®¶æ¼”ç¤ºï¼Œæç¤ºï¼šæ’è¡Œæ¦œç›´æ¥ä»æ•°æ®åº“æŸ¥è¯¢è®°å½•ç¥¨æ•°çš„å­—æ®µè¿›è¡Œæ’åºå°±å¯ä»¥äº†ï¼Œç¥¨æ•°çš„è¯ç›´æ¥æŸ¥è¯¢ç¥¨æ•°å­—æ®µå³å¯.</h3>\n<p><span class=\"rainbow\">å®ç°æ•ˆæœå›¾å¦‚ä¸‹</span></p>\n<p><img data-src=\"https://upimage.alexhchu.com/2021/03/10/92d38adf70a8d.png\" alt=\"æ•ˆæœå±•ç¤º\"></p>\n<p><span class=\"rainbow\">ä»¥ä¸Šä»£ç ä¸ä»¥å•†ç”¨</span></p>\n<h2 id=\"ä»¥ä¸Šå°±æ˜¯phpä¸­æŠ•ç¥¨çš„å®ç°æ–¹å¼å¦‚æœé‚£é‡Œæœ‰ä¸è¶³ä¹‹å¤„è¯·ä¸‹æ–¹è¯„è®ºæˆ‘ä¼šåŠæ—¶çº æ­£é”™è¯¯æœ‰å…¶ä»–ç›¸å…³å†…å®¹è¯·æ”¶è—ç å‘çš„åšå®¢è°¢è°¢\"><a class=\"markdownIt-Anchor\" href=\"#ä»¥ä¸Šå°±æ˜¯phpä¸­æŠ•ç¥¨çš„å®ç°æ–¹å¼å¦‚æœé‚£é‡Œæœ‰ä¸è¶³ä¹‹å¤„è¯·ä¸‹æ–¹è¯„è®ºæˆ‘ä¼šåŠæ—¶çº æ­£é”™è¯¯æœ‰å…¶ä»–ç›¸å…³å†…å®¹è¯·æ”¶è—ç å‘çš„åšå®¢è°¢è°¢\">#</a> ğŸ’ ä»¥ä¸Šå°±æ˜¯ php ä¸­æŠ•ç¥¨çš„å®ç°æ–¹å¼ï¼Œå¦‚æœé‚£é‡Œæœ‰ä¸è¶³ä¹‹å¤„è¯·ä¸‹æ–¹è¯„è®ºï¼Œæˆ‘ä¼šåŠæ—¶çº æ­£é”™è¯¯ï¼Œæœ‰å…¶ä»–ç›¸å…³å†…å®¹è¯·æ”¶è— â€œç å‘çš„åšå®¢â€ï¼Œè°¢è°¢ï¼</h2>\n<h2 id=\"ä¸‹ä¸€æœŸæ›´æ–°ä½¿ç”¨javaå®ç°æŠ•ç¥¨åŠŸèƒ½æœ¬äººæ˜¯ä¸€ä¸ªç¨‹åºçˆ±å¥½è€…å¦‚ä»¥ä¸Šå†…å®¹å¯¹ä½ æœ‰ç”¨è¯·è®°å¾—ç‚¹èµåˆ†äº«å“¦\"><a class=\"markdownIt-Anchor\" href=\"#ä¸‹ä¸€æœŸæ›´æ–°ä½¿ç”¨javaå®ç°æŠ•ç¥¨åŠŸèƒ½æœ¬äººæ˜¯ä¸€ä¸ªç¨‹åºçˆ±å¥½è€…å¦‚ä»¥ä¸Šå†…å®¹å¯¹ä½ æœ‰ç”¨è¯·è®°å¾—ç‚¹èµåˆ†äº«å“¦\">#</a> ğŸ’ ä¸‹ä¸€æœŸæ›´æ–°ä½¿ç”¨ Java å®ç°æŠ•ç¥¨åŠŸèƒ½ï¼Œæœ¬äººæ˜¯ä¸€ä¸ªç¨‹åºçˆ±å¥½è€…ï¼Œå¦‚ä»¥ä¸Šå†…å®¹å¯¹ä½ æœ‰ç”¨ï¼Œè¯·è®°å¾—ç‚¹èµåˆ†äº«å“¦ï¼Œ</h2>\n",
            "tags": [
                "php"
            ]
        }
    ]
}